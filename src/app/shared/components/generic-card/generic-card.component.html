<ion-card
  class="shadow-with-radious generic-card min-h-100 d-flex flex-col"
  (click)="handleButtonClick('viewMessage', data)"
>
  <div class="generic-card-header d-grid" *ngIf="meta">
    <div class="d-flex flex-align-items-center mx-10">
      <ion-icon
        [ngClass]="meta.isSent ? 'rotate-icon-sent' : 'rotate-icon-receive'"
        name="arrow-back-outline"
      ></ion-icon>
      <p class="max-width-70 wrap-text" style="margin: 2px 5px">
        {{ meta.isSent ? ("SENT" | translate) : ("RECEIVED" | translate) }}
      </p>
    </div>
    <div class="d-flex flex-align-items-center mx-10">
      <ng-container *ngIf="meta.message; else timeIcon">
        <ion-icon name="chatbox"></ion-icon>
      </ng-container>
      <ng-template #timeIcon>
        <ion-icon name="time"></ion-icon>
      </ng-template>

      <ng-container *ngIf="meta.message; else timeBlock">
        <p class="max-width-70 wrap-text" style="margin: 2px 5px">{{ meta.message }}</p>
      </ng-container>

      <ng-template #timeBlock>
        <small class="wrap-text" style="padding-left: 5px">
          {{ meta.resp.start_date * 1000 | date : "dd MMM, yyyy" }},
          {{ meta.resp.start_date * 1000 | date : "h:mm a" }} -
          {{ meta.resp.end_date * 1000 | date : "h:mm a" }}
        </small>
      </ng-template>
    </div>
  </div>

  <div class="card-content flex-1 d-flex gap-3 mx-10 py-2">
    @for(avail of mentorCardForm; track avail.name) {
      @if(avail.type === 'image') {
        <div class="image-container">
          <img
            (click)="onCardClick(data); $event.stopPropagation()"
            class="profile-img"
            [src]="data?.[avail.name] ? data?.[avail.name] : 'assets/prof-img/user.png'"
          />
        </div>
      }
    }
    
    <div class="text-content flex-1">
      @for(avail of mentorCardForm; track avail.name) {
        @if(avail.type !== 'image' && avail.name !== 'experience') {
          <div class="text-row">
            @if(avail.name === 'name' || avail.name === 'title') {
              <h4 class="card-title wrap-text">
                {{ data?.[avail.name] | titlecase }}
              </h4>
            } @else {
              <div class="d-flex flex-align-items-center">
                <p class="card-text wrap-text ">
                  {{ avail.type === 'array' && data?.[avail.name]?.length ? data?.[avail.name][0]?.label : data?.[avail.name] }}
                </p>
                @if(data?.experience) {
                  <p class="experience-text wrap-text">
                    ({{ data.experience }} years)
                  </p>
                }
              </div>
            }
          </div>
        }
      }
    </div>
  </div>

      <div
       class="d-flex flex-justify-flex-end p-1"
          [ngClass]="{ 'flex-justify-start': buttonConfig?.length > 1 }"
        >
          <ng-container *ngFor="let button of buttonConfig">
            <ion-button
            size="small"
              *ngIf="showButton(button, data)"
              [color]="button?.color"
x              (click)="
                handleButtonClick(button?.action, data);
                $event.stopPropagation()
              "
            >
              {{ button?.label | translate }}
            </ion-button>
          </ng-container>
        </div>
</ion-card>