<ion-card
  class="shadow-with-radious generic-card min-h-100 p flex flex-col ion-justify-content-between "
  (click)="handleButtonClick('viewMessage', data)"
>
  <div class="generic-card-header d-grid" *ngIf="meta">
    <div class="d-flex flex-align-items-center mx-10">
      <ion-icon
        [ngClass]="meta.isSent ? 'rotate-icon-sent' : 'rotate-icon-receive'"
        name="arrow-back-outline"
      ></ion-icon>
      <p class="max-width-70" style="margin: 2px 5px">
        {{ meta.isSent ? ("SENT" | translate) : ("RECEIVED" | translate) }}
      </p>
    </div>
    <div class="d-flex flex-align-items-center mx-10">
      <ng-container *ngIf="meta.message; else timeIcon">
        <ion-icon name="chatbox"></ion-icon>
      </ng-container>
      <ng-template #timeIcon>
        <ion-icon name="time"></ion-icon>
      </ng-template>

      <ng-container *ngIf="meta.message; else timeBlock">
        <p class="max-width-70" style="margin: 2px 5px">{{ meta.message }}</p>
      </ng-container>

      <ng-template #timeBlock>
        <small style="padding-left: 5px">
          {{ meta.resp.start_date * 1000 | date : "dd MMM, yyyy" }},
          {{ meta.resp.start_date * 1000 | date : "h:mm a" }} -
          {{ meta.resp.end_date * 1000 | date : "h:mm a" }}
        </small>
      </ng-template>
    </div>
  </div>
  <ion-grid class="flex-1 w-100" >
    
  <ion-row >
    <ion-col size="3" class="ion-no-padding ">
      @for(avail of mentorCardForm; track avail.name) {
        @if(avail.type === 'image') {
          <div class="ion-padding-start">
            <img
              (click)="onCardClick(data); $event.stopPropagation()"
              class="profile-img"
              [src]="data?.[avail.name] ? data?.[avail.name] : 'assets/prof-img/user.png'"
            />
          </div>
        }
      }
    </ion-col>
  
    <ion-col size="9" class="ion-no-padding">
      <ion-item lines="none" class="ion-no-padding">
   <ion-label class="">
    @for(avail of mentorCardForm; track avail.name) {
      @if(avail.type !== 'image' && avail.name !== 'experience') {
        <div class="d-flex ion-align-items-center">
          @if(avail.name === 'name' || avail.name === 'title') {
            <h4 class="ion-no-margin ion-text-wrap">
              {{ data?.[avail.name] | titlecase }}
            </h4>
          } @else {
            <p class="ion-text-wrap ion-no-margin">
              {{ avail.type === 'array' && data?.[avail.name]?.length ? data?.[avail.name][0]?.label : data?.[avail.name] }}
            </p>
            @if(data?.experience) {
              <p class="ion-no-margin ion-margin-start ion-text-nowrap">
                ({{ data.experience }} years)
              </p>
            }
          }
        </div>
      }
    }
</ion-label>
      </ion-item>
    </ion-col>
  </ion-row>
   
  </ion-grid>
   <div
        class="d-flex flex-justify-flex-end "
        [ngClass]="{ 'flex-justify-start': buttonConfig?.length > 1 }"
        >
          <ng-container *ngFor="let button of buttonConfig">
            <ion-button
            size="small"
              *ngIf="showButton(button, data)"
              [color]="button?.color"
x              (click)="
                handleButtonClick(button?.action, data);
                $event.stopPropagation()
              "
            >
              {{ button?.label | translate }}
            </ion-button>
          </ng-container>
        </div>
</ion-card>
